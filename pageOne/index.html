<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>pageOne</title>
  <script src="cross-domain.js"></script>
</head>
<body>
  <div>pageOne</div>
  <div id="sendTwo">向pageTwo发送消息</div>
  <div id="sendThird">向pageThird发送消息</div>
  <div id="sendFour">向sendPageFour发送消息</div>
  <div id="pageTwoText"></div>
  <div style="display:inline-block; width:500px; height: 500px; border: 1px solid #dfdfdf;">
    <iframe name="pageTwo" src="http://localhost:8081/" frameborder="0" width="100%" height="100%"></iframe>
  </div>
  <div style="display:inline-block; width:500px; height: 500px; border: 1px solid #dfdfdf;">
    <iframe name="pageThird" src="http://localhost:8082/" frameborder="0" width="100%" height="100%"></iframe>
  </div>
  <script>
    // 向pageTwo发送消息
    var sendTwo = document.getElementById('sendTwo')
    sendTwo.onclick = function() {
      var params = {
        content: '我是父页面pageOne的数据'
      }
      CD.send('pageTwo', 'sendTwoMethod', params)
    }
    // 向pageThird发送消息
    var sendThird = document.getElementById('sendThird')
    sendThird.onclick = function() {
      var params = {
        content: '我是父页面pageOne的数据'
      }
      CD.send('pageThird', 'sendThirdMethod', params)
    }
    // 向pageFour发送消息
    var sendFour = document.getElementById('sendFour')
    sendFour.onclick = function() {
      var params = {
        content: '我是父页面pageOne的数据'
      }
      CD.send('pageThird', 'sendFourMethod', params)
    }
    // 接收pageTwo页面的数据
    CD.extends('sendOneMethod', (data) => {
      var pageOneText = document.getElementById("pageTwoText");
      var txt =document.createTextNode(data.content);
      pageOneText.appendChild(txt);
    })
  </script>
</body>
</html>